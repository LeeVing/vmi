<?xml version="1.0"?>
<openerp>
	<data> 
<!-- Product Normal Form (inherit)-->
		<record id="product_normal_form_inherit" model="ir.ui.view">
			<field name="name">vmi.product.form.inherit</field>
			<field name="model">product.product</field>
			<field name="inherit_id" ref="product.product_normal_form_view" />
			<field eval="5" name="priority"/>
			<field name="arch" type="xml">
				<field name="name" invisible="1" />
				<field name="default_code" position="after">
				  <field name="vendor_part_number" />
				</field>
		  </field>
		</record>
	       <!-- Product Suppliers (inherit)
		<record id="view_product_supplier_inherit" model="ir.ui.view">
				<field name="name">product.normal.supplier.form.inherit</field>
				<field name="model">product.product</field>
				<field name="inherit_id" ref="product.product_normal_form_view"/>
				<field name="arch" type="xml">
						<group name="procurement" position="after">
								 <separator string="Suppliers"/>
								 <field name="seller_ids" context="{'uom_id': uom_id}"/>
						</group>
				</field>
		</record> -->
    <!-- Audit Wizard -->
		<record id="view_stock_move_audit_wizard" model="ir.ui.view">
				<field name="name">Audit Move</field>
				<field name="model">stock.move.audit</field>
				<field name="arch" type="xml">
						<form string="Audit Move" version="7.0">
								<separator string="Audit Products"/>
								<group>
										<field name="product_id"  readonly="1"/>
										<label for="product_qty"/>
										<div>
												<field name="product_qty" class="oe_inline"/>
												<field name="product_uom" class="oe_inline" readonly="1" groups="product.group_uom"/>
										</div>
										<field name="location_id" string="Location" readonly="1"
												domain="[('usage','!=','view')]" groups="stock.group_locations"/> 
								</group>
								<footer>
										<button name="move_audited" string="Ok" type="object" class="oe_highlight"  />
										or
										<button string="Cancel" class="oe_link" special="cancel" />
								</footer>
						</form>
				</field>
		</record>
		<!-- Audit Wizard Action -->        
		<record id="move_audit" model="ir.actions.act_window">
				<field name="name">Audit Move</field>
				<field name="type">ir.actions.act_window</field>
				<field name="res_model">stock.move.audit</field>
				<field name="view_type">form</field>
				<field name="view_mode">form</field>
				<field name="target">new</field>
		</record>
<!-- Stock Move Tree (inherit)-->
		<record id="stock_move_tree2_inherit" model="ir.ui.view">
			<field name="name">stock.move.tree2.inherit</field>
			<field name="model">stock.move</field>
			<field name="inherit_id" ref="stock.view_move_tree_reception_picking" />
			<field eval="5" name="priority"/>
			<field name="arch" type="xml">
				<tree position="attributes">
					  <attribute name="colors">blue:audit=='true'</attribute>
					  <!-- <attribute name="colors">grey:audit_fail=='true'</attribute> -->
				</tree>
                <field name="partner_id" position="after">
                    <field name="vendor_id" />
                </field>
				<field name="date" position="after">
				  <field name="audit" invisible="1" />
				  <field name="audit_fail" invisible="1" />
				</field>
				<field name="product_qty" position="after">
				  <button name="%(vmi.move_audit)d" icon="gtk-find" type="action" colspan="1" help="Audit" attrs="{'invisible': ['|',('state','=','done'),('audit','&lt;&gt;', True)]}" />
				  <button name="fail_audit" icon="gtk-dialog-warning" type="object" colspan="1" help="Failed Audit" attrs="{'invisible': [('audit_fail','&lt;&gt;', True)]}" />
				</field>
			</field>
		</record>
<!-- Stock Move Form (inherit)-->
		<record id="stock_move_form_inherit" model="ir.ui.view">
			<field name="name">stock.move.form.inherit</field>
			<field name="model">stock.move</field>
			<field name="inherit_id" ref="stock.view_move_form" />
			<field eval="5" name="priority"/>
			<field name="arch" type="xml">
                <field name="name" position="after">
                  <field name="vendor_id" />
                </field>
				<field name="date" position="after">
				  <field name="audit" invisible="1" />
				  <field name="audit_fail" invisible="1" />
				  <field name="note" />
				</field>
				<field name="product_uom" position="after">
				  <button name="%(vmi.move_audit)d" icon="gtk-find" type="action" class="oe_highlight" string="Audit" help="Audit" attrs="{'invisible': ['|',('state','=','done'),('audit','&lt;&gt;', True)]}" />
				  <button name="fail_audit" icon="gtk-dialog-warning" type="object" class="oe_highlight" string="Failed Audit" help="Failed Audit" attrs="{'invisible': [('audit_fail','&lt;&gt;', True)]}" />			  
				</field>
		  </field>
		</record>
		<!-- Stock Picking Move Tree -->
    <record id="view_move_picking_tree_inherit" model="ir.ui.view">
				<field name="name">stock.move.tree.inherit</field>
				<field name="model">stock.move</field>
				<field name="inherit_id" ref="stock.view_move_picking_tree" />
				<field eval="4" name="priority"/>
				<field name="arch" type="xml">
					<tree position="attributes">
					  <attribute name="colors">blue:audit=='true'</attribute>
					  <attribute name="colors">red:audit_fail=='true'</attribute>
					</tree>
							<field name="product_qty" position="after">
							  <field name="audit" invisible="1" />
							  <field name="audit_fail" invisible="1" />
							  <button name="%(vmi.move_audit)d" icon="gtk-find" type="action" colspan="1" help="Audit" attrs="{'invisible': ['|',('state','=','done'),('audit','&lt;&gt;', True)]}" />
							  <button name="fail_audit" icon="gtk-dialog-warning" type="object" colspan="1" help="Failed Audit" attrs="{'invisible': [('audit_fail','&lt;&gt;', True)]}" />
							</field>
				</field>
		</record>

        <record id="view_picking_in_form_inherit" model="ir.ui.view">
            <field name="name">stock.picking.in.form.inherit</field>
            <field name="model">stock.picking.in</field>
            <field name="inherit_id" ref="stock.view_picking_in_form"/>
            <field name="arch" type="xml">
                <button string="Create Invoice/Refund" position="replace">
                    <button name="%(stock.action_stock_invoice_onshipping)d" string="Create Invoice"  attrs="{'invisible': ['|','|',('state','&lt;&gt;','done'),('invoice_state','=','invoiced'),('invoice_state','=','none')]}"  type="action" class="oe_highlight"/>
                </button>
            </field>
        </record>
        <!-- VMI Client Page -->
        <record id="vmi_client_page_form" model="ir.ui.view">
            <field name="name">vmi.client.page.form</field>
            <field name="model">vmi.client.page</field>
            <field name="arch" type="xml">
                <form string="Client Page" version="7.0">
                  <sheet>
                    <div class="oe_title">
                        <h1>
                            <label string="VMI Client Page: " />
                            <field name="name" class="oe_inline" select="1"/>
                        </h1>
                    </div>
                    <notebook colspan="4">
                        <page string="Form">
                            <label for="form_action" />
                            <field name="form_action"/>
                            <label for="form_legend" />
                            <field name="form_legend"/>
                        </page>
                        <page string="Page">
                            <label for="title" />
                            <field name="title"/>
                            <div class="oe_clear" />
                            <label for="header" />
                            <field name="header" class="oe_inline"/>
                        </page>
                        <page string="Template">
                            <label for="template_path" />
                            <field name="template_path"/>
                            <label for="template_name" />
                            <field name="template_name"/>
                        </page>
                        <page string="Control">
                            <label for="mode" />
							<field name="mode" />
                            <label for="form_flag" />
                            <field name="form_flag"/>
                            <label for="active" />
							<field name="active"/>
                        </page>
                    </notebook>
                    <group string="Record">
						    <field name="write_date" />
						    <field name="write_uid" />
	         		</group>
                  </sheet>
                </form>
            </field>
        </record>
        <record id="view_client_tree" model="ir.ui.view">
            <field name="name">stock.client.tree</field>
            <field name="model">vmi.client.page</field>
            <field name="arch" type="xml">
                <tree string="Client Pages">
                    <field name="name"/>
                    <field name="template_name"/>
                    <field name="mode"/>
                    <field name="form_flag"/>
                    <field name="active"/>
                    <field name="write_date"/>
                </tree>
            </field>
        </record>
        <record id="action_client_form" model="ir.actions.act_window">
            <field name="name">Client Pages</field>
            <field name="res_model">vmi.client.page</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
            <field name="help" type="html">
              <p class="oe_view_nocontent_create">
                Click to define a new client page.
              </p>
            </field>
        </record>
        <menuitem action="action_client_form" id="menu_action_client_form" parent="stock.menu_stock_configuration" sequence="1"/>
        <!--Add Location and Category to invoice tree-->
        <record id="invoice_tree_inherit" model="ir.ui.view">
				<field name="name">account.invoice.tree.inherit</field>
				<field name="model">account.invoice</field>
				<field name="inherit_id" ref="account.invoice_tree" />
				<field name="arch" type="xml">
                    <tree position="attributes">
					    <attribute name="colors">blue:state=='draft';black:state=='manager_approved';green:state=='vendor_approved';red:state=='vendor_denied'</attribute>
					</tree>
                    <field name="user_id" position="after">
                        <field name="location_id" groups="stock.group_locations"/>
                        <field name="category_id" />
                    </field>
                    <field name="date_due" position="replace"/>
                    <field name="origin" position="replace"/>
				</field>
		</record>
        <!--Add Location and Category to supplier invoice form; Modify status bar-->
        <record id="invoice_supplier_form_inherit" model="ir.ui.view">
            <field name="name">account.invoice.supplier.form.inherit</field>
            <field name="model">account.invoice</field>
            <field name="inherit_id" ref="account.invoice_supplier_form"/>
            <field name="arch" type="xml">
                <button name="invoice_open" position="replace">
                    <button name="invoice_open" states="draft,vendor_denied" string="Validate" class="oe_highlight"/>
                </button>
                <button name="invoice_cancel" position="replace">
                    <button name="invoice_cancel" states="draft,manager_approved,vendor_approved,vendor_denied" string="Cancel Invoice"/>
                    <button name="action_invoice_sent" type="object" string="Send by Email"/>
                </button>
                <button name="action_invoice_sent" position="replace"/>

                <!--<label string="Draft Invoice" position="after">
                    <label string="Manager Approved Invoice" attrs="'invisible': ['|',('state','&lt;&gt;','manager_approved'), ('type','&lt;&gt;','in_invoice')]"/>
                    <label string="Vendor Approved Invoice" attrs="'invisible': ['|',('state','&lt;&gt;','vendor_approved'), ('type','&lt;&gt;','in_invoice')]"/>
                    <label string="Vendor Denied Invoice" attrs="'invisible': ['|',('state','&lt;&gt;','vendor_denied'), ('type','&lt;&gt;','in_invoice')]"/>
                </label>-->
                <field name="state" position="replace">
                    <field name="state" widget="statusbar" statusbar_visible="draft,manager_approved,vendor_approved,paid"/>
                </field>
                <field name="partner_id" position="after">
                    <field name="location_id" groups="stock.group_locations"/>
                    <field name="category_id" />
                </field>
                <field name="fiscal_position" position="replace"/>
                <field name="check_total" position="replace"/>
            </field>
        </record>
        <!--Add Category and Location to group by-->
        <record id="view_account_invoice_filter_inherit" model="ir.ui.view">
            <field name="name">view.account.invoice.filter.inherit</field>
            <field name="model">account.invoice</field>
            <field name="inherit_id" ref="account.view_account_invoice_filter"/>
            <field name="arch" type="xml">
                <filter string="Due Date" position="after">
                    <filter string="Category" icon="terp-folder-orange" domain="[]" context="{'group_by':'category_id'}"/>
                    <filter string="Location" icon="terp-folder-orange" domain="[]" context="{'group_by':'location_id'}"/>
                </filter>
            </field>
        </record>

        <!--Add Email Settings to Accounting tab-->
        <record model="ir.ui.view" id="view_mail_tree_inherit">
            <field name="name">view.mail.tree.inherit</field>
            <field name="model">mail.mail</field>
            <field name="inherit_id" ref="mail.view_mail_tree"/>
            <field name="arch" type="xml">
                <field name="subject" position="after">
                    <field name="partner_ids" string="Recipients"/>
                    <field name="state"/>
                </field>
                <field name="author_id" position="replace"/>
            </field>
        </record>

        <!--Set default groups-->
        <record model="ir.ui.view" id="view_mail_search">
            <field name="name">mail.mail.search</field>
            <field name="model">mail.mail</field>
            <field name="arch" type="xml">
                <search string="Email Search">
                    <field name="email_from" filter_domain="['|', '|',('email_from','ilike',self), ('email_to','ilike',self), ('subject','ilike',self)]" string="Email"/>
                    <field name="date"/>
                    <filter icon="terp-camera_test" name="received" string="Received" domain="[('state','=','received')]"/>
                    <filter icon="terp-call-start" name="outgoing" string="Outgoing" domain="[('state','=','outgoing')]"/>
                    <filter icon="terp-check" name="sent" string="Sent" domain="[('state','=','sent')]"/>
                    <filter icon="terp-gtk-stop" name="exception" string="Failed" domain="[('state','=','exception')]"/>
                    <separator/>
                    <filter icon="terp-camera_test" name="type_email" string="Email" domain="[('type','=','email')]"/>
                    <filter icon="terp-camera_test" name="type_comment" string="Comment" domain="[('type','=','comment')]"/>
                    <filter icon="terp-camera_test" name="type_notification" string="Notification" domain="[('type','=','notification')]"/>
                    <group expand="0" string="Extended Filters...">
                        <field name="author_id"/>
                        <field name="partner_ids"/>
                        <field name="model"/>
                        <field name="res_id"/>
                    </group>
                    <group expand="0" string="Group By...">
                        <filter string="Status" name="status" domain="[]" context="{'group_by':'state'}"/>
                        <filter string="Author" name="author" context="{'group_by':'author_id'}"/>
                        <filter string="Recipient" name="recipient" context="{'group_by':'partner_ids'}"/>
                        <filter string="Thread" name="thread" domain="[]" context="{'group_by':'message_id'}"/>
                        <filter string="Month" name="month" help="Creation Month" domain="[]" context="{'group_by':'date'}"/>
                        <filter string="Status" name="status" context="{'group_by':'state'}"/>
                    </group>
                </search>
            </field>
        </record>

        <record id="action_view_mail_mail" model="ir.actions.act_window">
            <field name="name">Emails</field>
            <field name="res_model">mail.mail</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
            <field name="search_view_id" ref="view_mail_search"/>
        </record>

        <!--Add Email Template to Accounting tab-->
        <record model="ir.ui.view" id="email_template_tree">
            <field name="name">email.template.tree</field>
            <field name="model">email.template</field>
            <field name="arch" type="xml">
                <tree string="Templates">
                    <field name="mail_server_id" invisible="1"/>
                    <field name="name"/>
                    <field name="model_id"/>
                    <field name="subject"/>
                    <field name="email_from"/>
                    <field name="email_to"/>
                    <field name="email_recipients"/>
                    <field name="report_name"/>
                </tree>
            </field>
        </record>

        <record id="view_email_template_search" model="ir.ui.view">
           <field name="name">email.template.search</field>
           <field name="model">email.template</field>
           <field name="arch" type="xml">
               <search string="Templates">
                    <field name="name" filter_domain="['|', '|', '|',('name','ilike',self), ('report_name','ilike',self), ('subject','ilike',self), ('email_to','ilike',self)]" string="Templates"/>
                    <field name="lang"/>
                    <field name="model_id"/>
                    <group expand="0" string="Group by...">
                        <filter string="SMTP Server" domain="[]" context="{'group_by':'mail_server_id'}" icon="terp-folder-orange"/>
                        <filter string="Model" domain="[]" context="{'group_by':'model_id'}" icon="terp-accessories-archiver"/>
                    </group>
               </search>
           </field>
        </record>

        <record model="ir.actions.act_window" id="action_email_template_tree_all">
            <field name="name">Templates</field>
            <field name="res_model">email.template</field>
            <field name="view_type">form</field>
            <field name="view_mode">form,tree</field>
            <field name="view_id" ref="email_template_tree" />
            <field name="search_view_id" ref="view_email_template_search"/>
        </record>

        <menuitem id="account_email_menu" name="Email Notification" parent="account.menu_finance_configuration" sequence="1"/>
        <menuitem name="Emails" id="menu_mail_mail" parent="account_email_menu" action="action_view_mail_mail" />
        <menuitem name="Templates" id="menu_email_templates" parent="account_email_menu" action="action_email_template_tree_all"/>

        <!--Add Email Notification to partners under Contacts tab-->
        <record id="view_partner_form_inherit" model="ir.ui.view">
            <field name="name">view.partner.form.inherit</field>
            <field name="model">res.partner</field>
            <field name="inherit_id" ref="base.view_partner_form"/>
            <field name="arch" type="xml">
                <form string="Contact" position="inside">
                    <sheet position="inside">
                        <div>
                            <field name="notification"/><label for="notification"/>
                            <field name="audit_notification"/><label for="audit_notification"/>
                        </div>
                    </sheet>
                </form>
            </field>
        </record>

	</data>			  
</openerp>	
